<?phpabstract class Grid{	protected $data;	protected $counter;	protected $logger;	public function __set($key, $val)	{		$key=strtolower($key);		$this->data[$key]=$val;		$this->logger = logger::getRootlogger();	}	public function __get($key)	{		$key=strtolower($key);		return $this->data[$key];	}	public abstract function pre_grid();	    public abstract function datahtml();	public abstract function preparehtml();	}class Data extends Grid{	private $html;	public function __construct($session, $module, $keyfield="")	{		$this->data["session"]=$session;		$this->data["module"]=$module;		$this->data["keyfield"]=$keyfield;		$this->counter=0;		$this->html="";	}		private function prepareURL()	{		$_url="";		if(isset($this->data["session"]))			$_url.="session=".$this->data["session"]."&";		if(isset($this->data["module"]))			$_url.="module=".encode($this->data["module"])."&";				return $_url;	}		public function pre_grid()	{		$str="";		$str.="<div class=\"box-header\" data-original-title>";		$str.="\t<h2><i class=\"halflings-icon user\"></i><span class=\"break\"></span>Member</h2>";		$str.="\t<div class=\"box-icon\">";		$str.="\t\t<a href=\"#\" class=\"btn-minimize\"><i class=\"halflings-icon chevron-up\"></i></a>";		$str.="\t\t<a href=\"#\" class=\"btn-close\"><i class=\"halflings-icon remove\"></i></a>";		$str.="\t</div>";		$str.="</div>";		return $str;	}		public function preparehtml()	{		}		public function datahtml()	{		$url=$this->prepareURL();		if($this->data["datarows"]==0)			$this->html .="<tbody><tr><td colspan=\"".$this->data["datacols"]."\" align=\"center\">No Data Found</td></tr>";					$td_idcount=0;				for($i=0; $i<$this->data["limit"]; $i++)		{						$val=$this->data["values"][$this->data["counter"]+$td_idcount-1];									if(count($val)==0)				break;							if(isset($this->data["rcss"]) && isset($this->data["altcss"]))			{				if($this->data["counter"]%2)					$this->html .="<tr class=\"".$this->data["rcss"]."\">";				else					$this->html .="<tr class=\"".$this->data["altcss"]."\">";			}			if(isset($this->data["rcss"])){				if($this->data["tridenable"])					$this->html .="<tr id=".$this->data["td_idcount"]." class=\"".$this->data["rcss"]."\">";				else					$this->html .="<tr class=\"".$this->data["rcss"]."\">";			}			else			{				if($this->data["tridenable"])					$this->html .="<tr id=".$this->data["td_idcount"].">";				else					$this->html .="<tr>";			}			//$this->html .="<img src=\"images/usb.png\" border=\"0\" alt="" />";			foreach($this->data["field"] as $fd)			{				if(strtolower($fd)=="status")				{					if($val[$fd]==1)						$this->html .="<td><a href=\"".$url."&action=".encode("block")."&key=".encode($val[$this->data["keyfield"]])."\"><img src=\"images/active.jpg\" border=\"none\" alt=\"Status\"/></a></td>";					else						$this->html .="<td><a href=\"".$url."&action=".encode("active")."&key=".encode($val[$this->data["keyfield"]])."\"><img src=\"images/inactive.jpg\" border=\"none\" alt=\"Status\"/></a></td>";					continue;				}				else					$this->html .="<td>".$val[$fd]."</td>";			}						if(isset($this->data["approvemethod"]))			{								$this->html .="<td align=\"center\"><a class=\"approve\" title=\"Approve\" name=\"edit\" href=\"#\" rel=\"".encode($val[$this->data["keyfield"]])."\"><img src=\"images/approve.png\" border=\"none\"/></a>";			}						if(isset($this->data["viewmethod"]))			{				$this->html.="<a class=\"btn btn-success\"  name=\"view\" href=\"index.php?".$_url."action=".encode($this->data["viewmethod"])."&key=".encode($val[$this->data["keyfield]"]])."&ch=".encode($this->data["ch"])."\" title=\"View\"><i class=\"halflings-icon white zoom-in\"></i> </a>";			}						if(isset($this->data["editmethod"]))			{				$this->html.="<a href=\"index.php?".$url."&action=".encode($this->data["editmethod"])."&key=".encode($val[$this->data["keyfield"]])."\"><img src=\"images/update1.png\" border=\"none\"/></a>";			}						if(isset($this->data["settingmethod"]))			{								$this->html .="<td align=\"center\"><a class=\"approve\" title=\"Setting\" name=\"setting\" href=\"#\" rel=\"".encode($val[$this->data["keyfield"]])."\"><img src=\"images/setting.png\" border=\"none\"/></a>";			}						if(isset($this->data["deletemethod"]))			{				$this->html .="<a class=\"delete\" name=\"delete\" title=\"Delete\" href=\"#\" rel=\"".encode($val[$this->data["keyfield"]])."\"><img src=\"images/delete1.png\" border=\"none\"/></a></td>";			}						$td_idcount++;		}				$this->html .="</tr></tbody>\n";		}}class GridMetro extends Data{		public function preparehtml()	{		$str="<div class=\"row-fluid sortable\">\n";		$str.="\t<div class=\"box span12\">\n";		$str.="\t\t".$this->pre_grid()."\n";		$str.="\t\t<div class=\"box-content\">\n";		$str.="\t\t".$this->datahtml()."\n";		$str.="\t</div>\n";		$str.="\t</div>\n";		$str.="</div>\n";		return $str;	}}?>